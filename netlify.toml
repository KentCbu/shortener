# ðŸ”§ Build Settings
[build]
  command = "npm install"   # Only needed if you have dependencies
  functions = "api"         # Where your Netlify Functions live
  publish = "public"        # Best practice to use a 'public' folder

# ðŸ”„ Redirect Rules
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200
  force = true              # Ensures this takes precedence

# ðŸŽ¯ Short URL Handling
[[redirects]]
  from = "/:slug([a-f0-9]{6})"  # Only match 6-character hex slugs (e.g. abc123)
  to = "/.netlify/functions/redirect"
  status = 200
  conditions = {Language = ["en"]}  # Optional: filter by language

# ðŸš« Block direct function access
[[redirects]]
  from = "/.netlify/functions/*"
  to = "/404.html"
  status = 404
  force = true

# ðŸ“› Custom 404 Page
[[redirects]]
  from = "/*"
  to = "/404.html"
  status = 404
